import{r as o,j as e,a as F,u as T,F as U,f as be,L as M,b as V,c as ee,d as se,e as ae,g as re,h as ve,i as te,k as ne,l as oe,m as ie,n as ce,o as Ne,p as we,O as le,q as de,s as Y,t as ye,v as Ee,w as Ce,x as Se,y as H,z as ke,N as me,B as qe,R as Ae,A as P,C as De}from"./vendor-B8qlGJRm.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function h(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(c){if(c.ep)return;c.ep=!0;const i=h(c);fetch(c.href,i)}})();const ue=o.createContext(),ze=({children:s})=>{const[r,h]=o.useState([]),u=async()=>{try{const t=await F.get("https://backend-mywf.onrender.com/api/festividad/festividades");h(t.data)}catch(a){console.error("âŒ Error al listar los eventos:",a),setTimeout(()=>u(),5e3)}},c=async a=>{try{const t=`https://backend-mywf.onrender.com/api/festividad/detalle/${a}`;return(await F.get(t)).data}catch(t){throw console.error("âŒ Error al obtener detalle del evento:",t),t}},i=async a=>{try{const t=localStorage.getItem("token"),l="https://backend-mywf.onrender.com/api/festividad/crear",j={headers:{Authorization:`Bearer ${t}`}};return(await F.post(l,a,j)).data}catch(t){throw console.error("âŒ Error al crear el evento:",t),t}},d=async(a,t)=>{try{const l=localStorage.getItem("token"),j=`https://backend-mywf.onrender.com/api/festividad/actualizar/${a}`,q={headers:{Authorization:`Bearer ${l}`}};return(await F.put(j,t,q)).data}catch(l){throw console.error("âŒ Error al actualizar el evento:",l),l}},f=async a=>{try{const t=localStorage.getItem("token"),l=`https://backend-mywf.onrender.com/api/festividad/eliminar/${a}`,j={headers:{Authorization:`Bearer ${t}`}};return(await F.delete(l,j)).data}catch(t){throw console.error("âŒ Error al eliminar el evento:",t),t}},n=async a=>{try{const t=`https://backend-mywf.onrender.com/api/festividad/festividades-por-mes/${a}`;return(await F.get(t)).data}catch(t){throw console.error("âŒ Error al listar eventos por mes:",t),t}};return o.useEffect(()=>{u()},[]),e.jsx(ue.Provider,{value:{eventos:r,listarEventos:u,obtenerDetalleEvento:c,crearEvento:i,actualizarEvento:d,eliminarEvento:f,listarEventosPorMes:n},children:s})},$e=({toggleSidebar:s})=>{const[r,h]=o.useState(!1),[u,c]=o.useState(null),[i,d]=o.useState(!1),[f,n]=o.useState(null),[a,t]=o.useState([]),{listarEventosPorMes:l}=o.useContext(ue),j=T();o.useEffect(()=>{const x=localStorage.getItem("token"),m=localStorage.getItem("tipoUsuario");h(!!x),c(m)},[]);const q=()=>{localStorage.removeItem("token"),localStorage.removeItem("tipoUsuario"),h(!1),c(null),j("/"),window.location.reload()},C=async x=>{n(x);try{const m=await l(x);t(m[x]||[])}catch(m){console.error("Error al obtener festividades del mes:",m)}},b=()=>{n(null),t([])},y=()=>{d(!i)},p=x=>{j(`/searches?month=${x}`)},g=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return e.jsxs("nav",{className:"navbar px-4",children:[e.jsx("button",{className:"menu-btn",onClick:s,children:e.jsx(U,{icon:be})}),e.jsxs(M,{to:"/",className:"navbar-logo",children:[e.jsx("img",{src:"/logo.png",alt:"Logo"}),e.jsx("span",{className:"navbar-title",children:"Megadisfraz"})]}),e.jsx("ul",{className:"navbar-meses",children:g.map(x=>e.jsxs("li",{className:"nav-item",onMouseEnter:()=>C(x),onMouseLeave:b,children:[e.jsx("button",{className:"month-link",onClick:()=>p(x),children:x}),f===x&&a.length>0&&e.jsxs("div",{className:"event-dropdown",children:[e.jsx("div",{className:"event-dropdown-header",children:e.jsxs("h4",{children:["Eventos en ",x]})}),e.jsx("ul",{className:"event-list",children:a.map(m=>e.jsxs("li",{className:"event-item",onClick:()=>j(`/searches?event=${encodeURIComponent(m.nombre)}`),children:[e.jsx("span",{className:"event-day",children:m.dia}),e.jsxs("div",{children:[e.jsx("div",{className:"event-name",children:m.nombre}),m.descripcion&&e.jsx("div",{className:"event-desc",children:m.descripcion})]})]},m.id))})]})]},x))}),e.jsx("div",{className:"navbar-auth",children:r?e.jsxs(e.Fragment,{children:[e.jsx(M,{to:"/perfil",className:"icon-btn profile-icon",title:"Perfil",children:e.jsx(U,{icon:ee})}),e.jsx("button",{className:"icon-btn logout-icon",onClick:q,title:"Cerrar SesiÃ³n",children:e.jsx(U,{icon:se})}),(u==="admin"||u==="moderador")&&e.jsxs("div",{className:"admin-menu-container",children:[e.jsxs("button",{className:"icon-btn admin-icon",onClick:y,title:"Administrador",children:[e.jsx(U,{icon:ae})," ",e.jsx(U,{icon:re})]}),i&&e.jsxs("div",{className:"admin-menu",children:[u==="admin"&&e.jsx(M,{to:"/administradores",className:"admin-menu-item",children:"Administradores"}),e.jsx(M,{to:"/eventos",className:"admin-menu-item",children:"Eventos"}),e.jsx(M,{to:"/disfraces",className:"admin-menu-item",children:"Disfraces"}),e.jsx(M,{to:"/etiquetas",className:"admin-menu-item",children:"Etiquetas"})]})]})]}):e.jsx(M,{to:"/login",className:"icon-btn login-icon",title:"Iniciar SesiÃ³n",children:e.jsx(U,{icon:V})})})]})},_=o.createContext(),Ie=({children:s})=>{const[r,h]=o.useState([]),u=async()=>{try{const t=await F.get("https://backend-mywf.onrender.com/api/disfraz/listar");h(t.data)}catch(a){console.error("âŒ Error al listar los disfraces:",a),setTimeout(()=>u(),5e3)}},c=async a=>{try{const t=`https://backend-mywf.onrender.com/api/disfraz/detalle/${a}`;return(await F.get(t)).data}catch(t){throw console.error("âŒ Error al obtener detalle del disfraz:",t),t}},i=async a=>{try{const t=localStorage.getItem("token"),l="https://backend-mywf.onrender.com/api/disfraz/registro",j={headers:{Authorization:`Bearer ${t}`}};return(await F.post(l,a,j)).data}catch(t){throw console.error("âŒ Error al registrar disfraz:",t),t}},d=async(a,t)=>{try{const l=localStorage.getItem("token"),j=`https://backend-mywf.onrender.com/api/disfraz/actualizar/${a}`,q={headers:{Authorization:`Bearer ${l}`}};return(await F.put(j,t,q)).data}catch(l){throw console.error("âŒ Error al actualizar el disfraz:",l),l}},f=async a=>{try{const t=localStorage.getItem("token"),l=`https://backend-mywf.onrender.com/api/disfraz/eliminar/${a}`,j={headers:{Authorization:`Bearer ${t}`}};return(await F.delete(l,j)).data}catch(t){throw console.error("âŒ Error al eliminar el disfraz:",t),t}},n=a=>r.filter(t=>t.categoria===a);return o.useEffect(()=>{u()},[]),e.jsx(_.Provider,{value:{disfraces:r,setDisfraces:h,listarDisfraces:u,obtenerDetalleDisfraz:c,registrarDisfraz:i,actualizarDisfraz:d,eliminarDisfraz:f,filtrarDisfracesPorCategoria:n},children:s})},Me="/assets/coso-DREvTNrd.gif",Z=[{label:"1ra Sucursal: YARUQUI CENTRO",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d249.3626477649494!2d-78.31752496658034!3d-0.16204089881778425!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x91d593004a7fa75f%3A0x5eea80851419080a!2sMegadisfraz!5e0!3m2!1ses-419!2sec!4v1740273750468!5m2!1ses-419!2sec"},{label:"2da Sucursal: CAYAMBE CENTRO",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d296.54494697342307!2d-78.14407258761588!3d0.04045211760451157!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e2a08f745888e7b%3A0x836a42c1eea0bfb1!2sCentro%20Comercial%20de%20Vendedores%20Aut%C3%B3nomos!5e0!3m2!1ses-419!2sec!4v1740273826714!5m2!1ses-419!2sec"},{label:"3ra Sucursal: YARUQUI - UPC",src:"https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d249.36266087396976!2d-78.3181939994935!3d-0.16097235436319585!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1ses-419!2sec"}];function he(){const[s,r]=o.useState(Z[0].src);return e.jsxs("div",{className:"mapa-wrapper",children:[e.jsx("h2",{className:"sidebar-title",children:"Mapa Sucursales"}),e.jsxs("div",{className:"mapa-layout",children:[e.jsx("ul",{className:"sucursales-list",children:Z.map((h,u)=>e.jsx("li",{onClick:()=>r(h.src),children:h.label},u))}),e.jsxs("div",{className:"map-container",children:[e.jsx(U,{icon:ve,className:"map-icon"}),e.jsx("iframe",{title:"mapa-sucursales",src:s,width:"100%",height:"200",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})]}),e.jsx("div",{className:"local-image",children:e.jsx("img",{src:Me,alt:"Local"})})]}),e.jsxs("div",{className:"social-icons",children:[e.jsx("a",{href:"https://www.instagram.com/megadisfraz_yaruqui?igsh=dHJwd3hmaHU2aTNq",children:e.jsx(te,{})}),e.jsx("a",{href:"https://x.com/Megadisfraz?t=IxW60maTBR2FoOO_RNDDeQ&s=09",children:e.jsx(ne,{})}),e.jsx("a",{href:"https://www.tiktok.com/@megadisfraz_yaruqui?_t=ZM-8wGmbrvw46Y&_r=1",children:e.jsx(oe,{})})]}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsxs("a",{href:"https://wa.me/593939232766",children:[e.jsx(ie,{}),"Whatsapp."]})}),e.jsx("li",{children:e.jsx("a",{href:"webmegadisfraz513@gmail.com",children:"Gmail."})})]}),e.jsx("p",{className:"footer-text",children:"Â© 2025 Megadisfraz"})]})}const Fe=({sidebarOpen:s,toggleSidebar:r})=>{const[h,u]=o.useState([]),[c,i]=o.useState(""),[d,f]=o.useState(!1),n=T(),a=ce(),{disfraces:t}=o.useContext(_),l=localStorage.getItem("tipoUsuario"),j=()=>{f(b=>!b)};o.useEffect(()=>{(async()=>{try{const y=await fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!y.ok)throw new Error("Error al obtener las etiquetas");const p=await y.json();u(p)}catch(y){console.error("Error al cargar las etiquetas:",y)}})()},[]);const q=b=>{const y=new URLSearchParams(a.search);y.set("etiqueta",b),n(`/searches?${y.toString()}`),r()},C=()=>{c.trim()&&t.filter(y=>y.nombre.toLowerCase().includes(c.toLowerCase())||y.descripcion.toLowerCase().includes(c.toLowerCase())).length>0&&(n(`/searches?query=${c}`),r())};return o.useEffect(()=>(s?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),()=>document.body.classList.remove("sidebar-open")),[s]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`overlay ${s?"active":""}`,onClick:r}),e.jsxs("aside",{className:`sidebar ${s?"active":""}`,children:[e.jsxs("div",{className:"sidebar-top",children:[e.jsx("button",{className:"close-btn",onClick:r,children:e.jsx(U,{icon:Ne})}),e.jsx("div",{className:"sidebar-auth-icons",children:localStorage.getItem("token")?e.jsxs("div",{className:"auth-icons-wrapper",children:[e.jsx(M,{to:"/perfil",className:"icon-btn profile-icon",title:"Perfil",children:e.jsx(U,{icon:ee})}),e.jsx("button",{className:"icon-btn logout-icon",title:"Cerrar SesiÃ³n",onClick:()=>{localStorage.clear(),window.location.reload()},children:e.jsx(U,{icon:se})}),(l==="admin"||l==="moderador")&&e.jsxs("div",{className:"admin-menu-container",children:[e.jsxs("button",{className:"icon-btn admin-icon",onClick:j,title:"Administrador",children:[e.jsx(U,{icon:ae})," ",e.jsx(U,{icon:re})]}),d&&e.jsxs("div",{className:"admin-menu",children:[l==="admin"&&e.jsx(M,{to:"/administradores",className:"admin-menu-item",children:"Administradores"}),e.jsx(M,{to:"/eventos",className:"admin-menu-item",children:"Eventos"}),e.jsx(M,{to:"/disfraces",className:"admin-menu-item",children:"Disfraces"}),e.jsx(M,{to:"/etiquetas",className:"admin-menu-item",children:"Etiquetas"})]})]})]}):e.jsx(M,{to:"/login",className:"icon-btn login-icon",title:"Iniciar SesiÃ³n",children:e.jsx(U,{icon:V})})})]}),e.jsxs("div",{className:"search-container",children:[e.jsx("input",{type:"text",placeholder:"Buscar",value:c,onChange:b=>i(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),C())},className:"search-input"}),e.jsx("button",{className:"search-btn",onClick:C,children:e.jsx(U,{icon:we})})]}),e.jsx("h2",{className:"sidebar-title",children:"Etiquetas"}),e.jsx("div",{className:"tags-container",children:h.map(b=>e.jsx("button",{className:"tag-button",onClick:()=>q(b.nombre),children:b.nombre},b.id))})]})]})},Le=()=>e.jsxs("footer",{className:"footer",children:[e.jsxs("div",{className:"social-icons",children:[e.jsx("a",{href:"https://www.instagram.com/megadisfraz_yaruqui?igsh=dHJwd3hmaHU2aTNq",children:e.jsx(te,{})}),e.jsx("a",{href:"https://x.com/Megadisfraz?t=IxW60maTBR2FoOO_RNDDeQ&s=09",children:e.jsx(ne,{})}),e.jsx("a",{href:"https://www.tiktok.com/@megadisfraz_yaruqui?_t=ZM-8wGmbrvw46Y&_r=1",children:e.jsx(oe,{})})]}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"#",children:"Home"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"News"})}),e.jsx("li",{children:e.jsxs("a",{href:"https://wa.me/593939232766",children:[e.jsx(ie,{}),"Whatsapp."]})}),e.jsx("li",{children:e.jsx("a",{href:"webmegadisfraz513@gmail.com",children:"Gmail."})})]}),e.jsx("p",{className:"footer-text",children:"Â© 2025 Megadisfraz"})]}),Pe=()=>{const[s,r]=o.useState(!1),h=()=>{r(!s)};return e.jsxs("div",{className:"parent",children:[e.jsxs("div",{className:"div1",children:[" ",e.jsx($e,{toggleSidebar:h})]}),e.jsx(Fe,{sidebarOpen:s,toggleSidebar:h}),e.jsxs("div",{className:"div3",children:[e.jsx(le,{})," "]}),e.jsxs("div",{className:"div4",children:[" ",e.jsx(Le,{})]})]})},pe=o.createContext(),Ue=({children:s})=>{const[r,h]=o.useState({}),u=async d=>{try{const n="https://backend-mywf.onrender.com/api",a=localStorage.getItem("tipoUsuario");if(!a)throw new Error("Tipo de usuario no definido");const t=`${n}/admin/perfil`,l={headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`}},j=await F.get(t,l);return h({usuario:j.data,rol:a}),j.data}catch(n){throw console.error("âŒ Error al obtener el perfil:",n),n}},c=async(d,f)=>{try{const n=localStorage.getItem("token"),t=localStorage.getItem("tipoUsuario")==="admin"?`https://backend-mywf.onrender.com/api/admin/actualizar/${d}`:`https://backend-mywf.onrender.com/api/usuario/actualizar/${d}`,l={headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}},j=await F.put(t,f,l);return h(j.data),j.data}catch(n){throw console.error("âŒ Error al actualizar el perfil:",n),n}},i=async d=>{try{const f=localStorage.getItem("token"),a=localStorage.getItem("tipoUsuario")==="admin"?"https://backend-mywf.onrender.com/api/admin/actualizar-password":"https://backend-mywf.onrender.com/api/usuario/actualizar-password",t={headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`}};return(await F.put(a,d,t)).data}catch(f){throw console.error("âŒ Error al actualizar la contraseÃ±a:",f),f}};return o.useEffect(()=>{const d=localStorage.getItem("token");d&&u(d)},[]),e.jsx(pe.Provider,{value:{auth:r,setAuth:h,obtenerPerfil:u,actualizarPerfil:c,actualizarPassword:i},children:s})};function Q({className:s,children:r,...h}){return e.jsx("div",{className:de("bg-white rounded-xl shadow-lg overflow-hidden h-full transform transition-transform hover:scale-105",s),style:{border:"1px solid #ccc",boxShadow:"0 4px 8px rgba(10, 10, 10, 0.78)",transition:"transform 0.3s ease"},...h,children:r})}function W({className:s,children:r,...h}){return e.jsx("div",{className:de("p-4 h-full",s),...h,children:r})}function Re(){const s=T(),{disfraces:r=[]}=o.useContext(_),h=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],u=h[new Date().getMonth()],c=a=>{const t=[...h],l=t.indexOf(u),j=[...t.slice(l),...t.slice(0,l)].reverse();return[...a].sort((q,C)=>{if(!q.festividades||!C.festividades)return 0;const b=y=>{let p=-1;return y.festividades.forEach(g=>{const x=j.indexOf(g.mes);x>p&&(p=x)}),p};return b(C)-b(q)})},i=a=>[...a].sort((t,l)=>{if(!t.festividades||!l.festividades)return 0;const j=q=>{const C=q.festividades.filter(b=>b.mes===u);return C.length===0?1/0:Math.min(...C.map(b=>b.dia))};return j(t)-j(l)}),d=r.length>0?i(r.filter(a=>a.festividades&&a.festividades.some(t=>t.mes===u))):[],f=c(r),n=a=>{s(`/productos/${a.id}`)};return e.jsxs("div",{className:"store-container",children:[e.jsx("section",{className:"carousel-section",style:{maxWidth:"80%",margin:"auto"},children:e.jsxs("div",{id:"carouselExampleIndicators",className:"carousel slide","data-bs-ride":"carousel",children:[e.jsx("div",{className:"carousel-indicators",children:r.map((a,t)=>e.jsx("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":t,className:t===0?"active":"","aria-current":t===0?"true":"false","aria-label":`Slide ${t+1}`},t))}),e.jsx("div",{className:"carousel-inner",children:r.map((a,t)=>{var l;return e.jsxs("div",{className:`carousel-item ${t===0?"active":""}`,onClick:()=>n(a),children:[e.jsx("img",{src:((l=a.imagenes)==null?void 0:l[0])||"/placeholder-image.jpg",alt:a.nombre,className:"carousel-image",style:{height:"500px",width:"100%",objectFit:"scale-down"},onError:j=>{j.target.src="/placeholder-image.jpg"}}),e.jsx("div",{className:"carousel-caption d-none d-md-block",children:e.jsx("p",{className:"carousel-text",style:{color:"black"},children:a.nombre})})]},a.id)})}),e.jsxs("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"prev",children:[e.jsx("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Previous"})]}),e.jsxs("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"next",children:[e.jsx("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Next"})]})]})}),e.jsxs("section",{className:"new-arrivals",children:[e.jsxs("h2",{className:"titulo",children:["Disfraces de ",u]}),e.jsx("div",{className:"new-arrivals-container",children:d.length>0?d.map(a=>{var t;return e.jsxs(Q,{className:"new-arrival-card",onClick:()=>n(a),children:[e.jsx("img",{src:((t=a.imagenes)==null?void 0:t[0])||"/placeholder-image.jpg",alt:a.nombre,className:"arrival-image",onError:l=>{l.target.src="/placeholder-image.jpg"}}),e.jsx(W,{children:e.jsx("p",{children:a.nombre})})]},a.id)}):e.jsxs("p",{className:"no-disfraces",children:["No hay disfraces disponibles para ",u,"."]})})]}),e.jsx(he,{}),e.jsxs("section",{className:"all-disfraces",children:[e.jsx("h2",{className:"all-title",children:"Todos los Disfraces"}),e.jsx("div",{className:"all-container",children:f.length>0?f.map(a=>{var t,l;return(t=a.festividades)==null||t.reduce((j,q)=>{const C=h.indexOf(j.mes);return h.indexOf(q.mes)>C?q:j},{mes:"Enero",dia:1}),e.jsxs(Q,{className:"all-card",onClick:()=>n(a),children:[e.jsx("img",{src:((l=a.imagenes)==null?void 0:l[0])||"/placeholder-image.jpg",alt:a.nombre,className:"all-image",onError:j=>{j.target.src="/placeholder-image.jpg"}}),e.jsx(W,{children:e.jsx("p",{children:a.nombre})})]},a.id)}):e.jsx("p",{className:"no-disfraces",children:"Cargando disfraces..."})})]})]})}const Te=()=>{var g,x;const{obtenerDetalleDisfraz:s,disfraces:r}=o.useContext(_),{id:h}=Y(),u=T(),[c,i]=o.useState(null),[d,f]=o.useState(!0),[n,a]=o.useState(null),t=m=>`${m.nombre} - ${m.dia} de ${m.mes}`,l=m=>{const N=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return[...m].sort((k,w)=>{const v=N.indexOf(k.mes),A=N.indexOf(w.mes);return v!==A?v-A:k.dia-w.dia})};if(o.useEffect(()=>{(async()=>{var N;try{f(!0);const k=await s(h);(N=k==null?void 0:k.festividades)!=null&&N.length&&(k.festividades=l(k.festividades)),i(k??null)}catch{a("Error al cargar los detalles del producto")}finally{f(!1)}})()},[h,s]),d)return e.jsx("div",{className:"loading-message",children:"Cargando detalles del producto..."});if(n)return e.jsx("div",{className:"error-message",children:n});if(!c)return e.jsx("div",{className:"producto-no-encontrado",children:"Producto no encontrado"});const j=[].concat(c.imagenes||[]),q=r.filter(m=>m.id!==parseInt(h,10)),C=m=>u(`/productos/${m.id}`),b=q.filter(m=>{var N;return(N=m.etiquetas)==null?void 0:N.some(k=>{var w;return(w=c.etiquetas)==null?void 0:w.some(v=>v.id===k.id)})}),y=q.filter(m=>{var N;return(N=m.festividades)==null?void 0:N.some(k=>{var w;return(w=c.festividades)==null?void 0:w.some(v=>k.nombre===v.nombre&&k.dia===v.dia&&k.mes===v.mes)})}),p=q.filter(m=>{var N;return(N=m.festividades)==null?void 0:N.some(k=>{var w;return(w=c.festividades)==null?void 0:w.some(v=>k.mes===v.mes)})});return e.jsxs("div",{className:"product-detail-wrapper",children:[e.jsxs("div",{className:"parent-ProductDetail",children:[e.jsx("div",{className:"product-img",children:e.jsxs("div",{id:"carouselExampleIndicators",className:"carousel slide",children:[e.jsx("div",{className:"carousel-indicators",children:j.map((m,N)=>e.jsx("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":N,className:N===0?"active":"","aria-label":`Slide ${N+1}`},N))}),e.jsx("div",{className:"carousel-inner",children:j.map((m,N)=>e.jsx("div",{className:`carousel-item ${N===0?"active":""}`,children:e.jsx("div",{className:"carousel-image-wrapper",children:e.jsx("img",{src:m,className:"d-block w-100",alt:c.nombre})})},N))}),j.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"prev",children:[e.jsx("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Previous"})]}),e.jsxs("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide":"next",children:[e.jsx("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Next"})]})]})]})}),e.jsxs("div",{className:"product-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",c.nombre]}),e.jsxs("p",{children:[e.jsx("strong",{children:"DescripciÃ³n:"})," ",c.descripcion||"No hay descripciÃ³n disponible."]}),e.jsx("p",{children:e.jsx("strong",{children:"Evento:"})}),(g=c.festividades)!=null&&g.length?e.jsx("ul",{className:"festividades-list",children:c.festividades.map((m,N)=>e.jsx("li",{children:t(m)},m.id||N))}):e.jsx("p",{children:"Evento no disponible"}),e.jsx("p",{children:e.jsx("strong",{children:"Etiquetas:"})}),e.jsx("ul",{className:"product-prendas",children:(x=c.etiquetas)!=null&&x.length?c.etiquetas.map(m=>e.jsx("li",{children:m.nombre},m.id)):e.jsx("li",{children:"No hay etiquetas disponibles."})})]})]}),e.jsx("div",{className:"product-mapa",children:e.jsx(he,{})}),e.jsxs("div",{className:"product-related",children:[e.jsx("h2",{className:"titulo",children:"Disfraces con las mismas etiquetas"}),e.jsx("div",{className:"productos-similares-container",children:e.jsx("div",{className:"productos-similares-lista",children:b.length>0?b.slice(0,6).map((m,N)=>e.jsxs("div",{className:"producto-similar",onClick:()=>C(m),children:[e.jsx("img",{src:m.imagenes[0],alt:m.nombre}),e.jsx("p",{children:m.nombre})]},N)):e.jsx("p",{children:"No existen disfraces que coincidan en etiquetas."})})}),e.jsx("h2",{className:"titulo",children:"Disfraces de los mismos eventos"}),e.jsx("div",{className:"productos-similares-container",children:e.jsx("div",{className:"productos-similares-lista",children:y.length>0?y.slice(0,6).map((m,N)=>e.jsxs("div",{className:"producto-similar",onClick:()=>C(m),children:[e.jsx("img",{src:m.imagenes[0],alt:m.nombre}),e.jsx("p",{children:m.nombre})]},N)):e.jsx("p",{children:"No existen disfraces que coincidan en eventos."})})}),e.jsx("h2",{className:"titulo",children:"Disfraces del mismo mes"}),e.jsx("div",{className:"productos-similares2-container",children:e.jsx("div",{className:"productos-similares-lista",children:p.length>0?p.slice(0,6).map((m,N)=>e.jsxs("div",{className:"producto-similar",onClick:()=>C(m),children:[e.jsx("img",{src:m.imagenes[0],alt:m.nombre}),e.jsx("p",{children:m.nombre})]},N)):e.jsx("p",{children:"No existen disfraces que coincidan en el mes."})})})]})]})},G=({children:s,tipo:r})=>{const h=r==="success"?"success":"error",u=r==="success"?ye:Ee;return e.jsxs("div",{className:`mensaje-container ${h}`,children:[e.jsx(U,{icon:u,className:"mensaje-icon"}),e.jsx("div",{className:"mensaje-text",children:e.jsx("p",{children:s})})]})},Be=()=>{const[s,r]=o.useState({email:"",password:"",tipoUsuario:"usuario"}),[h,u]=o.useState({}),c=T(),i=f=>{r({...s,[f.target.name]:f.target.value})},d=async f=>{var n,a;f.preventDefault();try{const t=s.tipoUsuario==="admin"||s.tipoUsuario==="moderador"?"https://backend-mywf.onrender.com/api/admin/login":"https://backend-mywf.onrender.com/api/usuario/login",l=await F.post(t,s);if(l!=null&&l.data)u({respuesta:l.data.msg,tipo:!0}),l.data.token&&(localStorage.setItem("token",l.data.token),localStorage.setItem("tipoUsuario",l.data.rol),console.log("Rol guardado en localStorage:",l.data.rol),l.data.rol==="admin"||l.data.rol==="moderador"||l.data.rol==="usuario"?c("/"):u({respuesta:"Rol desconocido",tipo:!1})),r({email:"",password:"",tipoUsuario:"usuario"});else throw new Error("Respuesta inesperada del servidor")}catch(t){const l=((a=(n=t.response)==null?void 0:n.data)==null?void 0:a.msg)||"Error al iniciar sesiÃ³n";u({respuesta:l,tipo:!1}),console.error("Error:",t.message)}};return e.jsxs("div",{className:"login-body",children:[e.jsx(M,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx("h2",{className:"text-center mb-4",children:"Iniciar sesiÃ³n"}),e.jsxs("form",{id:"login-form",onSubmit:d,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Correo electrÃ³nico:"}),e.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:s.email,onChange:i,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"ContraseÃ±a:"}),e.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",value:s.password,onChange:i,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tipo de usuario:"}),e.jsxs("select",{name:"tipoUsuario",className:"form-control",onChange:i,value:s.tipoUsuario,children:[e.jsx("option",{value:"usuario",children:"Usuario"}),e.jsx("option",{value:"admin",children:"Administrador"}),e.jsx("option",{value:"moderador",children:"Moderador"})]})]}),e.jsx("p",{className:"forgot-password",children:e.jsx(M,{to:"/forgot/id",className:"forgot-link",children:"Â¿Olvidaste tu contraseÃ±a?"})}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Iniciar sesiÃ³n"}),e.jsxs("p",{className:"text-center mt-3",children:["Â¿No tienes una cuenta?"," ",e.jsx(M,{to:"/register",className:"register-link",children:"RegÃ­strate"})]})]}),h.respuesta&&e.jsx(G,{tipo:h.tipo?"success":"error",children:h.respuesta})]})]})},Oe=()=>{const[s,r]=o.useState({nombre:"",apellido:"",email:"",password:""}),[h,u]=o.useState({respuesta:"",tipo:""}),c=T(),i=f=>{r({...s,[f.target.name]:f.target.value})},d=async f=>{f.preventDefault();const n=/^[a-zA-ZÃ¡Ã©Ã­Ã³ÃºÃÃ‰ÃÃ“ÃšÃ±Ã‘\s]+$/;if(!s.nombre.trim()||!s.apellido.trim()||!s.email.trim()||!s.password.trim()){u({respuesta:"Todos los campos son obligatorios.",tipo:"error"});return}if(!n.test(s.nombre)||!n.test(s.apellido)){u({respuesta:"El nombre y apellido solo pueden contener letras y espacios.",tipo:"error"});return}try{const t=await F.post("https://backend-mywf.onrender.com/api/usuario/registro",s);t&&t.data?(u({respuesta:t.data.msg,tipo:"success"}),setTimeout(()=>{u({respuesta:"",tipo:""}),c("/login")},3e3),r({nombre:"",apellido:"",email:"",password:""})):u({respuesta:"Algo saliÃ³ mal",tipo:"error"})}catch(a){const t=a.response&&a.response.data?a.response.data.msg:"Error al registrar";u({respuesta:t,tipo:"error"})}};return e.jsxs("div",{className:"login-body",children:[e.jsx(M,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx("h2",{className:"text-center mb-4",children:"Registro"}),e.jsxs("form",{id:"login-form",onSubmit:d,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",className:"form-control",id:"nombre",name:"nombre",value:s.nombre,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"apellido",children:"Apellido:"}),e.jsx("input",{type:"text",className:"form-control",id:"apellido",name:"apellido",value:s.apellido,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Correo ElectrÃ³nico:"}),e.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:s.email,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"ContraseÃ±a:"}),e.jsx("input",{type:"password",className:"form-control",id:"password",name:"password",value:s.password,onChange:i})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Registrarse"}),e.jsxs("p",{className:"text-center mt-3",children:["Â¿Ya tienes una cuenta?"," ",e.jsx(M,{to:"/login",className:"login-link",children:"Inicia SesiÃ³n"})]})]}),h.respuesta&&e.jsx(G,{tipo:h.tipo,children:h.respuesta})]})]})},Je=()=>{const{token:s}=Y(),[r,h]=o.useState({respuesta:"",tipo:null});return o.useEffect(()=>{(async()=>{var c,i;try{const d=`https://backend-mywf.onrender.com/api/usuario/confirmar/${s}`,f=await F.get(d);h({respuesta:f.data.msg,tipo:"success"})}catch(d){h({respuesta:((i=(c=d.response)==null?void 0:c.data)==null?void 0:i.msg)||"Error al confirmar cuenta",tipo:"error"})}})()},[s]),e.jsxs("div",{className:"login-body",children:[e.jsx(M,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx("h2",{className:"text-center mb-4",children:"ConfirmaciÃ³n de Cuenta"}),r.respuesta&&e.jsx(G,{tipo:r.tipo,children:r.respuesta}),e.jsx("div",{className:"confirmar-circle",children:e.jsx(U,{icon:Ce,className:"confirmar-icon"})}),e.jsx("p",{className:"text-center confirmar-texto-gracias",children:"Â¡Gracias por confirmar tu cuenta!"}),e.jsx("p",{className:"text-center confirmar-texto-iniciar",children:"Ahora puedes iniciar sesiÃ³n."}),e.jsx(M,{to:"/login",className:"confirmar-link",children:"Iniciar SesiÃ³n"})]})]})},_e=()=>{const[s,r]=o.useState({}),[h,u]=o.useState({email:"",tipoUsuario:"usuario"}),c=d=>{u({...h,[d.target.name]:d.target.value})},i=async d=>{var f,n;d.preventDefault();try{const a=h.tipoUsuario==="admin"?"https://backend-mywf.onrender.com/api/admin/recuperar-password":"https://backend-mywf.onrender.com/api/usuario/recuperar-password",t=await F.post(a,{email:h.email});r({respuesta:t.data.msg,tipo:"success"}),u({email:"",tipoUsuario:"usuario"})}catch(a){r({respuesta:((n=(f=a.response)==null?void 0:f.data)==null?void 0:n.msg)||"Error al recuperar contraseÃ±a",tipo:"error"})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"login-body",children:[e.jsx(M,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[s.respuesta&&e.jsx(G,{tipo:s.tipo,children:s.respuesta}),e.jsx("h1",{className:"text-center mb-4",children:"Â¡Olvidaste tu contraseÃ±a!"}),e.jsx("h3",{className:"text-center mb-4",children:"No te preocupes, ingresa tu correo"}),e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Email"}),e.jsx("input",{type:"email",placeholder:"Enter your email",className:"form-control",name:"email",value:h.email,onChange:c})]}),e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Tipo de Usuario"}),e.jsxs("select",{className:"form-control",name:"tipoUsuario",value:h.tipoUsuario,onChange:c,children:[e.jsx("option",{value:"usuario",children:"Usuario"}),e.jsx("option",{value:"admin",children:"Administrador"})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Enviar Correo"})})]}),e.jsxs("div",{className:"text-center mt-3",children:[e.jsx("p",{children:"Si la recuerdas"}),e.jsx(M,{to:"/login",className:"register-link",children:"Login"})]})]})]}),e.jsx("div",{className:"forgot-background"})]})},He=()=>{const{token:s}=Y(),r=T(),[h,u]=o.useState(!1),[c,i]=o.useState({password:"",confirmpassword:""}),d=n=>{i({...c,[n.target.name]:n.target.value||""})},f=async n=>{n.preventDefault();try{const a=`https://backend-mywf.onrender.com/api/usuario/nuevo-password/${s}`,t=await F.post(a,c);i({password:"",confirmpassword:""}),H.success(t.data.msg),setTimeout(()=>{r("/login")},3e3)}catch(a){H.error(a.response.data.msg)}};return o.useEffect(()=>{(async()=>{try{const a=`https://backend-mywf.onrender.com/api/usuario/recuperar-password/${s}`,t=await F.get(a);u(!0),H.success(t.data.msg)}catch(a){H.error(a.response.data.msg)}})()},[s]),e.jsxs("div",{className:"login-body",children:[e.jsx(M,{className:"brand",to:"/",children:e.jsxs("div",{className:"brand-content",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"})]})}),e.jsxs("div",{className:"login-wrapper",children:[e.jsx(Se,{}),e.jsx("h1",{className:"text-center mb-4 text-3xl font-semibold uppercase text-gray-500",children:"Bienvenido Otra Vez"}),e.jsx("small",{className:"text-center text-gray-400 my-4 block text-sm",children:"Por favor ingresa los detalles"}),h&&e.jsxs("form",{className:"w-full",onSubmit:f,children:[e.jsxs("div",{className:"login-form-group",children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Password"}),e.jsx("input",{type:"password",placeholder:"Enter your password",className:"form-control",name:"password",value:c.password,onChange:d}),e.jsx("label",{className:"mb-2 block text-sm font-semibold",children:"Confirm Password"}),e.jsx("input",{type:"password",placeholder:"Repeat your password",className:"form-control",name:"confirmpassword",value:c.confirmpassword,onChange:d})]}),e.jsx("div",{className:"mb-3",children:e.jsx("button",{className:"btn btn-primary",children:"Enviar"})})]})]})]})},Ge=()=>{const s=T(),{auth:r,obtenerPerfil:h,actualizarPerfil:u,actualizarPassword:c}=o.useContext(pe),[i,d]=o.useState({passwordactual:"",password:"",confirmpassword:""}),[f,n]=o.useState(""),[a,t]=o.useState(""),[l,j]=o.useState(""),q=r==null?void 0:r.rol;o.useEffect(()=>{const g=localStorage.getItem("token");g?h(g).then(x=>{t(x.nombre),j(x.apellido)}).catch(()=>{n("Error al cargar el perfil.")}):s("/")},[s]);const C=()=>{localStorage.removeItem("token"),localStorage.removeItem("tipoUsuario"),s("/")},b=g=>{d({...i,[g.target.name]:g.target.value})},y=async g=>{g.preventDefault();const x=/^[a-zA-ZÃ¡Ã©Ã­Ã³ÃºÃÃ‰ÃÃ“ÃšÃ±Ã‘\s]+$/;if(!a.trim()||!l.trim()){n("El nombre y apellido no pueden estar vacÃ­os.");return}if(!x.test(a)||!x.test(l)){n("El nombre y apellido solo pueden contener letras y espacios.");return}try{await u(r.usuario._id,{nombre:a,apellido:l}),n("Perfil actualizado con Ã©xito."),setTimeout(()=>{s("/perfil")},1e3)}catch{n("Error al actualizar el perfil.")}},p=async g=>{if(g.preventDefault(),!i.passwordactual||!i.password||!i.confirmpassword){n("Todos los campos de contraseÃ±a son obligatorios.");return}if(i.password!==i.confirmpassword){n("Las contraseÃ±as no coinciden.");return}try{await c({passwordactual:i.passwordactual,passwordnuevo:i.password}),n("ContraseÃ±a actualizada correctamente."),d({passwordactual:"",password:"",confirmpassword:""})}catch{n("Error al actualizar la contraseÃ±a.")}};return e.jsx("div",{className:"profile-container",children:e.jsxs("div",{className:"profile-wrapper",children:[e.jsx("h4",{className:"mb-4 text-center",children:q==="admin"?"Perfil de Administrador":"Perfil de Usuario"}),f&&e.jsx("div",{className:`alert ${f.includes("Error")?"alert-danger":"alert-success"}`,children:f}),r.usuario?e.jsxs("table",{className:"profile-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{class:"hidden-on-mobile",children:"ID de Usuario"}),e.jsx("th",{children:"Correo ElectrÃ³nico"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Apellido"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{class:"hidden-on-mobile",children:r.usuario._id}),e.jsx("td",{children:r.usuario.email}),e.jsx("td",{children:r.usuario.nombre}),e.jsx("td",{children:r.usuario.apellido})]})})]}):e.jsx("p",{children:"Cargando..."}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Nuevo Nombre"}),e.jsx("input",{type:"text",className:"profile-input",value:a,onChange:g=>t(g.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Nuevo Apellido"}),e.jsx("input",{type:"text",className:"profile-input",value:l,onChange:g=>j(g.target.value)})]}),e.jsx("button",{type:"submit",className:"btn btn-success profile-button",children:"Actualizar Perfil"})]}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"ContraseÃ±a Actual"}),e.jsx("input",{type:"password",placeholder:"Ingrese su contraseÃ±a actual",className:"profile-input",name:"passwordactual",value:i.passwordactual,onChange:b})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Nueva ContraseÃ±a"}),e.jsx("input",{type:"password",placeholder:"Ingrese su nueva contraseÃ±a",className:"profile-input",name:"password",value:i.password,onChange:b})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Confirmar ContraseÃ±a"}),e.jsx("input",{type:"password",placeholder:"Repita su nueva contraseÃ±a",className:"profile-input",name:"confirmpassword",value:i.confirmpassword,onChange:b})]}),e.jsx("button",{type:"submit",className:"btn btn-success profile-button",children:"Actualizar ContraseÃ±a"})]}),e.jsx("div",{className:"d-flex justify-content-between mt-3",children:e.jsx("button",{type:"button",className:"btn btn-danger profile-button",onClick:C,children:"Cerrar SesiÃ³n"})})]})})},Xe=()=>e.jsxs("div",{className:"not-found-container",children:[e.jsx("img",{src:"public/logo.png",alt:"Logo Megadisfraz",className:"header-logo-img"}),e.jsx("span",{className:"brand-text",children:"Megadisfraz"}),e.jsx("div",{className:"not-found-icon-wrapper",children:e.jsx(U,{icon:ke,className:"not-found-icon"})}),e.jsx("div",{className:"not-found-content-wrapper",children:e.jsxs("div",{className:"not-found-content",children:[e.jsx("p",{className:"not-found-title",children:"Pagina no encontrada"}),e.jsx("p",{className:"not-found-text",children:"Lo sentimos, la pagina que buscas no se puedo encontrar"})]})})]}),Qe=()=>{const s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],[r,h]=o.useState({mes:"",dia:"",nombre:"",descripcion:""}),[u,c]=o.useState([]),i=n=>{const a=["Abril","Junio","Septiembre","Noviembre"];return n==="Febrero"?Array.from({length:29},(t,l)=>l+1):a.includes(n)?Array.from({length:30},(t,l)=>l+1):Array.from({length:31},(t,l)=>l+1)};o.useEffect(()=>{r.mes&&(c(i(r.mes)),h(n=>({...n,dia:""})))},[r.mes]);const d=n=>{const{name:a,value:t}=n.target;h({...r,[a]:t})},f=async n=>{n.preventDefault();try{const a=await fetch("https://backend-mywf.onrender.com/api/festividad/crear",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({...r,dia:parseInt(r.dia,10)})});if(!a.ok)throw new Error("Error al crear el evento");await a.json(),alert("âœ… Evento creado exitosamente")}catch{alert("âŒ Hubo un problema al crear el evento")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{className:"tittle-crearev",children:"Crear Eventos"}),e.jsxs("form",{onSubmit:f,className:"form-content",children:[e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"mes",children:"Mes:"}),e.jsxs("select",{id:"mes",name:"mes",className:"form-input3",value:r.mes,onChange:d,required:!0,children:[e.jsx("option",{value:"",children:"-- Selecciona un mes --"}),s.map((n,a)=>e.jsx("option",{value:n,children:n},a))]})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"dia",children:"DÃ­a:"}),e.jsxs("select",{id:"dia",name:"dia",className:"form-input3",value:r.dia,onChange:d,required:!0,disabled:!r.mes,children:[e.jsx("option",{value:"",children:"-- Selecciona un dÃ­a --"}),u.map(n=>e.jsx("option",{value:n.toString(),children:n},n))]})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre del evento o festividad:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input3",value:r.nombre,onChange:d,required:!0})]}),e.jsxs("div",{className:"form-group1",children:[e.jsx("label",{htmlFor:"descripcion",children:"DescripciÃ³n de la festividad:"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input3",value:r.descripcion,onChange:d,required:!0})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Crear"})]})]})},We=()=>{const s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],[r,h]=o.useState([]),[u,c]=o.useState([]),[i,d]=o.useState({mes:"",dia:"",nombre:"",descripcion:""}),[f,n]=o.useState([]),[a,t]=o.useState(!1),[l,j]=o.useState(null),[q,C]=o.useState("");o.useEffect(()=>{(async()=>{try{const N=await(await fetch("https://backend-mywf.onrender.com/api/festividad/festividades",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();h(N),c(N)}catch(m){console.error("Error al cargar eventos:",m),alert("Error al cargar eventos")}})()},[]),o.useEffect(()=>{if(q.trim()==="")c(r);else{const x=r.filter(m=>m.nombre.toLowerCase().includes(q.toLowerCase())||m.mes.toLowerCase().includes(q.toLowerCase())||m.dia.toString().includes(q));c(x)}},[q,r]),o.useEffect(()=>{if(i.mes){const x=i.mes==="Febrero"?Array.from({length:29},(m,N)=>N+1):["Abril","Junio","Septiembre","Noviembre"].includes(i.mes)?Array.from({length:30},(m,N)=>N+1):Array.from({length:31},(m,N)=>N+1);n(x),d(m=>({...m,dia:""}))}},[i.mes]);const b=x=>{const m=r.find(N=>N.id===x);m&&(d(m),j(x),t(!0))},y=async x=>{if(confirm("Â¿EstÃ¡s seguro de eliminar este evento?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/festividad/eliminar/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error;alert("âœ… Evento eliminado");const N=r.filter(k=>k.id!==x);h(N),c(N)}catch{alert("âŒ Error al eliminar evento")}},p=x=>{const{name:m,value:N}=x.target;d(k=>({...k,[m]:N}))},g=async x=>{x.preventDefault();try{if(!(await fetch(`https://backend-mywf.onrender.com/api/festividad/actualizar/${l}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({...i,dia:parseInt(i.dia,10)})})).ok)throw new Error;alert("âœ… Evento actualizado correctamente");const N=r.map(k=>k.id===l?{...k,...i}:k);h(N),c(N),t(!1),j(null)}catch{alert("âŒ Error al actualizar el evento")}};return e.jsx("div",{className:"form-container",children:a?e.jsxs("form",{onSubmit:g,className:"form-content",children:[e.jsx("h2",{className:"admin-title",children:"Editar Festividad"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre del evento:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:i.nombre,onChange:p,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"mes",children:"Mes:"}),e.jsxs("select",{id:"mes",name:"mes",className:"form-input",value:i.mes,onChange:p,required:!0,children:[e.jsx("option",{value:"",children:"-- Selecciona un mes --"}),s.map((x,m)=>e.jsx("option",{value:x,children:x},m))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"dia",children:"DÃ­a:"}),e.jsxs("select",{id:"dia",name:"dia",className:"form-input",value:i.dia,onChange:p,disabled:!i.mes,required:!0,children:[e.jsx("option",{value:"",children:"-- Selecciona un dÃ­a --"}),f.map(x=>e.jsx("option",{value:x,children:x},x))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"DescripciÃ³n:"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input",value:i.descripcion,onChange:p,required:!0,maxLength:250}),e.jsxs("p",{className:i.descripcion.length>=250?"text-error":"",children:[i.descripcion.length," / 250 caracteres"]})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Guardar Cambios"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>t(!1),children:"Cancelar"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"admin-title",children:"Lista de Festividades"}),e.jsxs("div",{className:"form-content",children:[e.jsx("label",{htmlFor:"busqueda",children:"Buscar por Nombre, Mes o DÃ­a:"}),e.jsx("input",{type:"text",id:"busqueda",name:"busqueda",className:"form-input",value:q,onChange:x=>C(x.target.value),placeholder:"Ingrese un nombre, mes o dÃ­a"})]}),e.jsx("ul",{className:"disfraz-list",children:u.map(x=>e.jsxs("li",{className:"disfraz-item",children:[e.jsxs("div",{className:"disfraz-info",children:[e.jsx("strong",{children:x.nombre})," - ",x.mes,"/",x.dia,e.jsx("br",{}),e.jsx("small",{children:x.descripcion})]}),e.jsxs("div",{className:"disfraz-actions",children:[e.jsx("button",{className:"edit-button2",onClick:()=>b(x.id),children:"Actualizar"}),e.jsx("button",{className:"delete-button2",onClick:()=>y(x.id),children:"Eliminar"})]})]},x.id))})]})})},Ye=()=>{const[s,r]=o.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"GestiÃ³n de Eventos"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>r("crear"),children:"Crear Evento"}),e.jsx("button",{className:"admin-button button-actualizar",onClick:()=>r("editar"),children:"Editar Evento"})]}),e.jsxs("div",{className:"admin-module-container",style:{marginTop:"20px"},children:[s==="crear"&&e.jsx(Qe,{}),s==="editar"&&e.jsx(We,{})]})]})},Ze=()=>{const s=ce(),r=T(),{disfraces:h=[]}=o.useContext(_),[u,c]=o.useState(""),[i,d]=o.useState(""),[f,n]=o.useState(""),[a,t]=o.useState(""),l=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],j=p=>p?p.replace(/\|/g,"").trim():"";o.useEffect(()=>{const p=new URLSearchParams(s.search),g=p.get("month")||"";c(p.get("query")||""),d(j(g)),n(p.get("etiqueta")||""),t(p.get("event")||""),console.log("ðŸ” ParÃ¡metros de bÃºsqueda (limpios):",{query:p.get("query"),month:j(g),etiqueta:p.get("etiqueta"),event:p.get("event")})},[s]);const q=h.filter(p=>{const g=i.toLowerCase(),x=f.toLowerCase(),m=a.toLowerCase(),N=u.toLowerCase();return(!u||p.nombre.toLowerCase().includes(N)||p.descripcion&&p.descripcion.toLowerCase().includes(N))&&(!i||p.festividades&&p.festividades.some(k=>k&&k.mes&&k.mes.toLowerCase()===g))&&(!f||p.etiquetas&&p.etiquetas.some(k=>k&&k.nombre&&k.nombre.toLowerCase()===x))&&(!a||p.festividades&&p.festividades.some(k=>k&&k.nombre&&k.nombre.toLowerCase().includes(m)))}),b=(p=>{if(!p||p.length===0)return[];const g=l[new Date().getMonth()],x=l.indexOf(g),m=[...l.slice(x),...l.slice(0,x)].reverse();return[...p].sort((N,k)=>{if(!N.festividades||!k.festividades)return 0;const w=v=>{let A=-1;return v.festividades.forEach(z=>{if(!z||!z.mes)return;const L=m.indexOf(z.mes);L>A&&(A=L)}),A};return w(k)-w(N)})})(q),y=p=>{r(`/productos/${p.id}`)};return e.jsx("div",{className:"searches-container",children:e.jsxs("section",{className:"filtered-disfraces",children:[e.jsxs("h2",{className:"filtered-title",children:[u&&`Resultados para "${u}"`,i&&` Disfraces de ${i}`,f&&` Etiqueta: ${f}`,a&&` Evento: ${a}`]}),e.jsx("div",{className:"filtered-container",children:b.length>0?b.map(p=>{var g,x;return e.jsxs(Q,{className:"filtered-card",onClick:()=>y(p),children:[e.jsx("img",{src:((g=p.imagenes)==null?void 0:g[0])||"/placeholder-image.jpg",alt:p.nombre,className:"filtered-image",onError:m=>{m.target.src="/placeholder-image.jpg"}}),e.jsxs(W,{children:[e.jsx("p",{children:p.nombre}),((x=p.festividades)==null?void 0:x.length)>0&&e.jsxs("small",{children:["Festividades: ",p.festividades.map(m=>m.mes).join(", ")]})]})]},p.id)}):e.jsx("p",{className:"no-disfraces",children:"No se encontraron disfraces con los filtros aplicados"})})]})})},Ke=()=>{const[s,r]=o.useState({nombre:"",etiquetas:[],festividades:[],descripcion:"",imagenes:[]}),[h,u]=o.useState([]),[c,i]=o.useState([]),[d,f]=o.useState(!0),[n,a]=o.useState(null),[t,l]=o.useState(!1),j=w=>{const v=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return[...w].sort((A,z)=>{const L=v.indexOf(A.mes),R=v.indexOf(z.mes);return L!==R?L-R:A.dia-z.dia})},q=w=>[...w].sort((v,A)=>v.nombre.localeCompare(A.nombre));o.useEffect(()=>{(async()=>{try{const[v,A]=await Promise.all([fetch("https://backend-mywf.onrender.com/api/festividad/festividades",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})]);if(!v.ok||!A.ok)throw new Error("Error al cargar datos iniciales");const[z,L]=await Promise.all([v.json(),A.json()]);u(j(z||[])),i(q(L||[])),f(!1)}catch(v){console.error("Error al cargar datos:",v),a("Hubo un problema al cargar los datos necesarios"),f(!1)}})()},[]);const C=w=>{const{name:v,value:A}=w.target;r(z=>({...z,[v]:A}))},b=w=>{const v=parseInt(w.target.value);if(v===-1){window.location.href="/etiquetas";return}s.etiquetas.includes(v)||(s.etiquetas.length<6?r(A=>({...A,etiquetas:[...A.etiquetas,v]})):alert("âŒ MÃ¡ximo 6 etiquetas permitidas"))},y=w=>{r(v=>({...v,etiquetas:v.etiquetas.filter(A=>A!==w)}))},p=w=>{const v=parseInt(w.target.value);if(v===-1){window.location.href="/eventos";return}s.festividades.includes(v)||(s.festividades.length<5?r(A=>({...A,festividades:[...A.festividades,v]})):alert("âŒ MÃ¡ximo 5 festividades permitidas"))},g=w=>{r(v=>({...v,festividades:v.festividades.filter(A=>A!==w)}))},x=w=>{const v=Array.from(w.target.files);if(v.length+s.imagenes.length>3){alert("âŒ Solo puedes subir un mÃ¡ximo de 3 imÃ¡genes");return}const A=v.map(z=>new Promise(L=>{const R=new FileReader;R.onloadend=()=>{L({file:z,preview:R.result})},R.readAsDataURL(z)}));Promise.all(A).then(z=>{r(L=>({...L,imagenes:[...L.imagenes,...z]}))})},m=w=>{r(v=>{const A=[...v.imagenes];return A.splice(w,1),{...v,imagenes:A}})},N=async()=>{try{const w=s.imagenes.map(async v=>{const A=new FormData;A.append("file",v.file),A.append("upload_preset","megadisfraz");const z=await fetch("https://api.cloudinary.com/v1_1/dxnnwuzrl/image/upload",{method:"POST",body:A});if(!z.ok){const L=await z.json();throw new Error(L.message||"Error al subir imagen")}return z.json()});return await Promise.all(w)}catch(w){throw console.error("Error al subir imÃ¡genes:",w),w}},k=async w=>{if(w.preventDefault(),l(!0),s.imagenes.length===0){alert("âŒ Debes subir al menos una imagen"),l(!1);return}if(s.festividades.length===0){alert("âŒ Debes seleccionar al menos una festividad"),l(!1);return}try{const A=(await N()).map(X=>X.secure_url),z={nombre:s.nombre.trim(),descripcion:s.descripcion.trim(),festividades:s.festividades,etiquetas:s.etiquetas,imagenes:A},L=await fetch("https://backend-mywf.onrender.com/api/disfraz/registro",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(z)}),R=await L.json();if(!L.ok)throw new Error(R.msg||"Error al crear el disfraz");alert("âœ… Disfraz creado exitosamente"),r({nombre:"",etiquetas:[],festividades:[],descripcion:"",imagenes:[]})}catch(v){console.error("Error completo:",v),alert(v.message||"Hubo un problema al crear el disfraz")}finally{l(!1)}};return d?e.jsxs("div",{className:"form-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Cargando datos necesarios..."})]}):n?e.jsxs("div",{className:"form-container",children:[e.jsx("p",{className:"error-message",children:n}),e.jsx("button",{className:"form-button",onClick:()=>window.location.reload(),children:"Reintentar"})]}):e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:k,className:"form-content",children:[e.jsx("h2",{children:"Crear Disfraz"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:s.nombre,onChange:C,required:!0,maxLength:100})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"etiquetas",children:"Etiquetas (mÃ¡x. 6):"}),e.jsxs("select",{id:"etiquetas",name:"etiquetas",className:"form-input1",onChange:b,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una etiqueta"}),c.map(w=>e.jsx("option",{value:w.id,children:w.nombre},w.id)),e.jsx("option",{value:"-1",children:"âž• Crear nueva etiqueta"})]}),e.jsx("ul",{className:"etiquetas-list",children:s.etiquetas.map(w=>{const v=c.find(A=>A.id===w);return e.jsxs("li",{children:[(v==null?void 0:v.nombre)||"Etiqueta desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>y(w),children:"X"})]},w)})}),e.jsxs("p",{className:s.etiquetas.length>=6?"text-error":"",children:[s.etiquetas.length," / 6 etiquetas seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"festividad",children:"Festividades (mÃ¡x. 5):"}),e.jsxs("select",{id:"festividad",name:"festividad",className:"form-input1",onChange:p,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una festividad"}),h.map(w=>e.jsxs("option",{value:w.id,children:[w.nombre," - ",w.mes,"/",w.dia]},w.id)),e.jsx("option",{value:"-1",children:"âž• Crear nueva festividad"})]}),e.jsx("ul",{className:"festividades-list",children:s.festividades.map(w=>{const v=h.find(A=>A.id===w);return e.jsxs("li",{children:[(v==null?void 0:v.nombre)||"Festividad desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>g(w),children:"X"})]},w)})}),e.jsxs("p",{className:s.festividades.length>=5?"text-error":"",children:[s.festividades.length," / 5 festividades seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"DescripciÃ³n (mÃ¡x. 250 caracteres):"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input1",maxLength:250,value:s.descripcion,onChange:C,required:!0}),e.jsxs("p",{className:s.descripcion.length>=250?"text-error":"",children:[s.descripcion.length," / 250 caracteres",s.descripcion.length>=250&&" (LÃ­mite alcanzado)"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ImÃ¡genes (mÃ¡ximo 3):"}),e.jsxs("div",{className:"image-preview-container",children:[s.imagenes.map((w,v)=>e.jsxs("div",{className:"image-box",children:[e.jsx("img",{src:w.preview,alt:`Preview ${v}`,className:"preview-img"}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>m(v),"aria-label":"Eliminar imagen",children:"X"})]},v)),s.imagenes.length<3&&e.jsxs("div",{className:"image-box upload-box",children:[e.jsxs("label",{className:"add-image-label",children:["+",e.jsx("input",{type:"file",accept:"image/*",onChange:x,hidden:!0,multiple:!0,"aria-label":"AÃ±adir imagen"})]}),e.jsx("p",{className:"add-image-text",children:"AÃ±adir imagen"})]})]})]}),e.jsx("button",{type:"submit",className:"form-button",disabled:t,children:t?"Creando...":"Crear Disfraz"})]})})},Ve=()=>{const[s,r]=o.useState([]),[h,u]=o.useState([]),[c,i]=o.useState([]),[d,f]=o.useState([]),[n,a]=o.useState({nombre:"",festividades:[],descripcion:"",etiquetas:[],imagenes:[]}),[t,l]=o.useState(null),[j,q]=o.useState(""),[C,b]=o.useState(!0),[y,p]=o.useState(null),[g,x]=o.useState(!1),[m,N]=o.useState(!1),k=E=>{const S=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return[...E].sort((D,$)=>{const I=S.indexOf(D.mes),O=S.indexOf($.mes);return I!==O?I-O:D.dia-$.dia})},w=E=>[...E].sort((S,D)=>S.nombre.localeCompare(D.nombre));o.useEffect(()=>{(async()=>{try{b(!0);const[S,D,$]=await Promise.all([fetch("https://backend-mywf.onrender.com/api/disfraz/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("https://backend-mywf.onrender.com/api/festividad/festividades",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})]);if(!S.ok||!D.ok||!$.ok)throw new Error("Error al cargar datos iniciales");const[I,O,B]=await Promise.all([S.json(),D.json(),$.json()]);r(I),u(I),i(w(O||[])),f(k(B||[])),b(!1)}catch(S){console.error("âŒ Error al cargar datos:",S),p("Hubo un problema al cargar la informaciÃ³n inicial"),b(!1)}})()},[]),o.useEffect(()=>{if(j.trim()==="")u(s);else{const E=s.filter(S=>{var D,$;return S.nombre.toLowerCase().includes(j.toLowerCase())||((D=S.etiquetas)==null?void 0:D.some(I=>I.nombre.toLowerCase().includes(j.toLowerCase())))||(($=S.festividades)==null?void 0:$.some(I=>I.nombre.toLowerCase().includes(j.toLowerCase())))});u(E)}},[j,s]);const v=async E=>{var S,D;try{const I=await(await fetch(`https://backend-mywf.onrender.com/api/disfraz/detalle/${E}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),O=I.imagenes.map(B=>({url:B,preview:B}));a({nombre:I.nombre,descripcion:I.descripcion,festividades:((S=I.festividades)==null?void 0:S.map(B=>B.id))||[],etiquetas:((D=I.etiquetas)==null?void 0:D.map(B=>B.id))||[],imagenes:O}),l(E),N(!0)}catch($){console.error("Error al cargar detalles del disfraz:",$),alert("Error al cargar detalles del disfraz")}},A=async E=>{if(window.confirm("Â¿EstÃ¡s seguro de que deseas eliminar este disfraz?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/disfraz/eliminar/${E}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar el disfraz");alert("âœ… Disfraz eliminado exitosamente");const $=s.filter(I=>I.id!==E);r($),u($),l(null),N(!1)}catch(D){console.error("âŒ Error al eliminar el disfraz:",D),alert("âŒ Hubo un problema al eliminar el disfraz")}},z=E=>{const{name:S,value:D}=E.target;a($=>({...$,[S]:D}))},L=E=>{const S=parseInt(E.target.value);if(S===-1)return alert("Redirigir a crear etiqueta");!n.etiquetas.includes(S)&&n.etiquetas.length<6&&a({...n,etiquetas:[...n.etiquetas,S]})},R=E=>{a({...n,etiquetas:n.etiquetas.filter(S=>S!==E)})},X=E=>{const S=parseInt(E.target.value);if(S===-1)return alert("Redirigir a crear festividad");!n.festividades.includes(S)&&n.festividades.length<5&&a({...n,festividades:[...n.festividades,S]})},xe=E=>{a({...n,festividades:n.festividades.filter(S=>S!==E)})},fe=E=>{const $=Array.from(E.target.files).slice(0,3-n.imagenes.length).map(I=>({file:I,preview:URL.createObjectURL(I)}));a(I=>({...I,imagenes:[...I.imagenes,...$]}))},je=E=>{a(S=>({...S,imagenes:S.imagenes.filter((D,$)=>$!==E)}))},ge=async E=>{E.preventDefault(),alert("Formulario enviado correctamente"),N(!1)};return C?e.jsxs("div",{className:"form-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Cargando datos necesarios..."})]}):y?e.jsxs("div",{className:"form-container",children:[e.jsx("p",{className:"error-message",children:y}),e.jsx("button",{className:"form-button",onClick:()=>window.location.reload(),children:"Reintentar"})]}):e.jsx("div",{className:"form-container",children:m?e.jsxs("form",{onSubmit:ge,className:"form-content",children:[e.jsx("h2",{children:"Editar Disfraz"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:n.nombre,onChange:z,required:!0,maxLength:100})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"etiquetas",children:"Etiquetas (mÃ¡x. 6):"}),e.jsxs("select",{id:"etiquetas",name:"etiquetas",className:"form-input1",onChange:L,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una etiqueta"}),c.map(E=>e.jsx("option",{value:E.id,children:E.nombre},E.id)),e.jsx("option",{value:"-1",children:"âž• Crear nueva etiqueta"})]}),e.jsx("ul",{className:"etiquetas-list",children:n.etiquetas.map(E=>{const S=c.find(D=>D.id===E);return e.jsxs("li",{children:[(S==null?void 0:S.nombre)||"Etiqueta desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>R(E),children:"X"})]},E)})}),e.jsxs("p",{className:n.etiquetas.length>=6?"text-error":"",children:[n.etiquetas.length," / 6 etiquetas seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"festividad",children:"Festividades (mÃ¡x. 5):"}),e.jsxs("select",{id:"festividad",name:"festividad",className:"form-input1",onChange:X,value:"",children:[e.jsx("option",{value:"",children:"Seleccione una festividad"}),d.map(E=>e.jsxs("option",{value:E.id,children:[E.nombre," - ",E.mes,"/",E.dia]},E.id)),e.jsx("option",{value:"-1",children:"âž• Crear nueva festividad"})]}),e.jsx("ul",{className:"festividades-list",children:n.festividades.map(E=>{const S=d.find(D=>D.id===E);return e.jsxs("li",{children:[(S==null?void 0:S.nombre)||"Festividad desconocida",e.jsx("button",{type:"button",className:"remove-button",onClick:()=>xe(E),children:"X"})]},E)})}),e.jsxs("p",{className:n.festividades.length>=5?"text-error":"",children:[n.festividades.length," / 5 festividades seleccionadas"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"DescripciÃ³n (mÃ¡x. 250 caracteres):"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input1",value:n.descripcion,onChange:z,maxLength:250,required:!0}),e.jsxs("p",{className:n.descripcion.length>=250?"text-error":"",children:[n.descripcion.length," / 250 caracteres",n.descripcion.length>=250&&" (LÃ­mite alcanzado)"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ImÃ¡genes (mÃ¡ximo 3):"}),e.jsxs("div",{className:"image-preview-container",children:[n.imagenes.map((E,S)=>e.jsxs("div",{className:"image-box",children:[e.jsx("img",{src:E.preview||E.url,alt:`Preview ${S}`,className:"preview-img"}),e.jsx("button",{type:"button",className:"remove-button",onClick:()=>je(S),"aria-label":"Eliminar imagen",children:"X"})]},S)),n.imagenes.length<3&&e.jsxs("div",{className:"image-box upload-box",children:[e.jsxs("label",{className:"add-image-label",children:["+",e.jsx("input",{type:"file",accept:"image/*",onChange:fe,hidden:!0,multiple:!0,"aria-label":"AÃ±adir imagen"})]}),e.jsx("p",{className:"add-image-text",children:"AÃ±adir imagen"})]})]})]}),e.jsx("button",{type:"submit",className:"form-button",disabled:g,children:g?"Actualizando...":"Guardar Cambios"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{N(!1),l(null)},children:"Cancelar"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"titlelistDis",children:"Lista de Disfraces"}),e.jsxs("div",{className:"form-content",children:[e.jsx("label",{htmlFor:"busqueda",children:"Buscar por Nombre, Etiqueta o Festividad:"}),e.jsx("input",{type:"text",id:"busqueda",name:"busqueda",className:"form-input",value:j,onChange:E=>q(E.target.value),placeholder:"Ingrese un nombre, etiqueta o festividad"})]}),e.jsx("ul",{className:"disfraz-list",children:h.map(E=>{var S,D;return e.jsxs("li",{className:"disfraz-item",children:[e.jsxs("div",{className:"disfraz-info",children:[e.jsx("strong",{children:"Nombre:"})," ",E.nombre," ",e.jsx("br",{}),e.jsx("strong",{children:"Etiquetas:"})," ",(S=E.etiquetas)==null?void 0:S.map($=>$.nombre).join(", "),e.jsx("br",{}),e.jsx("strong",{children:"Festividades:"})," ",(D=E.festividades)==null?void 0:D.map($=>$.nombre).join(", "),e.jsx("br",{})]}),e.jsxs("div",{className:"disfraz-actions",children:[e.jsx("button",{onClick:()=>v(E.id),className:"edit-button2",children:"Editar"}),e.jsx("button",{onClick:()=>A(E.id),className:"delete-button2",children:"Eliminar"})]})]},E.id)})})]})})},es=()=>{const[s,r]=o.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"GestiÃ³n de Disfraces"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>r("crear"),children:"Crear Disfraz"}),e.jsx("button",{className:"admin-button button-actualizar",onClick:()=>r("editar"),children:"Editar Disfraz"})]}),e.jsxs("div",{className:"admin-module-container",style:{marginTop:"20px"},children:[s==="crear"&&e.jsx(Ke,{}),s==="editar"&&e.jsx(Ve,{})]})]})},ss=()=>{const[s,r]=o.useState({nombre:"",apellido:"",direccion:"",telefono:"",email:"",password:"",rol:"moderador"}),[h,u]=o.useState(""),c=d=>{const{name:f,value:n}=d.target;r({...s,[f]:n})},i=async d=>{d.preventDefault();try{const f=await fetch("https://backend-mywf.onrender.com/api/admin/crear-moderador",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)}),n=await f.json();if(!f.ok)throw new Error(n.msg||"Error al crear administrador");u("âœ… Administrador creado correctamente"),r({nombre:"",apellido:"",direccion:"",telefono:"",email:"",password:"",rol:"moderador"})}catch(f){u(`âŒ ${f.message}`)}};return e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:i,className:"form-content",children:[e.jsx("h2",{children:"Crear Administrador"}),h&&e.jsx("p",{className:"mensaje",children:h}),["nombre","apellido","direccion","telefono","email","password"].map(d=>e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:d,children:[d.charAt(0).toUpperCase()+d.slice(1),":"]}),e.jsx("input",{type:d==="password"?"password":d==="email"?"email":"text",id:d,name:d,className:"form-input",value:s[d],onChange:c,required:!0})]},d)),e.jsx("button",{type:"submit",className:"form-button",children:"Crear"})]})})},as=()=>{const[s,r]=o.useState([]),[h,u]=o.useState([]),[c,i]=o.useState(null),[d,f]=o.useState({nombre:"",apellido:"",direccion:"",telefono:"",email:"",contraseÃ±a:""}),[n,a]=o.useState("");o.useEffect(()=>{(async()=>{try{const b=await fetch("https://backend-mywf.onrender.com/api/admin/listar-moderadores",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!b.ok)throw new Error("Error al obtener la lista de administradores");const y=await b.json();r(y),u(y)}catch(b){console.error("Error al cargar los administradores:",b),alert("Hubo un problema al cargar los administradores")}})()},[]),o.useEffect(()=>{if(n.trim()==="")u(s);else{const C=s.filter(b=>b.email.toLowerCase().includes(n.toLowerCase()));u(C)}},[n,s]);const t=async C=>{try{const b=await fetch(`https://backend-mywf.onrender.com/api/admin/detalle-moderador/${C}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!b.ok)throw new Error("Error al obtener los detalles del administrador");const y=await b.json();f(y),i(C)}catch(b){console.error("Error al cargar los detalles del administrador:",b),alert("Hubo un problema al cargar los detalles del administrador")}},l=async C=>{if(window.confirm("Â¿EstÃ¡s seguro de que deseas eliminar este administrador?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/admin/eliminar-moderador/${C}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Error al eliminar el administrador");alert("Administrador eliminado exitosamente");const p=s.filter(g=>g.id!==C);r(p),u(p),a("")}catch(y){console.error("Error al eliminar el administrador:",y),alert("Hubo un problema al eliminar el administrador")}},j=C=>{const{name:b,value:y}=C.target;f({...d,[b]:y})},q=async C=>{C.preventDefault();try{const b=await fetch(`https://backend-mywf.onrender.com/api/admin/actualizar-moderador/${c}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(d)});if(!b.ok)throw new Error("Error al actualizar el administrador");const y=await b.json();alert("Administrador actualizado exitosamente"),console.log("Administrador actualizado:",y),r(p=>p.map(g=>g.id===c?{...g,...d}:g)),u(p=>p.map(g=>g.id===c?{...g,...d}:g)),i(null)}catch(b){console.error("Error al actualizar el administrador:",b),alert("Hubo un problema al actualizar el administrador")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{className:"listadmin",children:"Lista de Administradores"}),e.jsxs("div",{className:"form-content",children:[e.jsx("label",{className:"titlebusc",htmlFor:"email",children:"Buscar por Correo ElectrÃ³nico:"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:n,onChange:C=>a(C.target.value),placeholder:"Ingrese un correo electrÃ³nico"})]}),e.jsx("ul",{className:"admin-list",children:h.map(C=>e.jsxs("li",{className:"admin-item",children:[e.jsx("strong",{children:"Nombre:"})," ",C.nombre," ",C.apellido," ",e.jsx("br",{}),e.jsx("strong",{children:"Email:"})," ",C.email," ",e.jsx("br",{}),e.jsx("button",{onClick:()=>t(C.id),className:"edit-button",children:"Editar"}),e.jsx("button",{onClick:()=>l(C.id),className:"delete-button",children:"Eliminar"}),e.jsx("hr",{})]},C.id))}),c&&e.jsxs("form",{onSubmit:q,className:"form-content",children:[e.jsx("h2",{children:"Actualizar Administrador"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:d.nombre,onChange:j,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"apellido",children:"Apellido:"}),e.jsx("input",{type:"text",id:"apellido",name:"apellido",className:"form-input",value:d.apellido,onChange:j,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"direccion",children:"DirecciÃ³n:"}),e.jsx("input",{type:"text",id:"direccion",name:"direccion",className:"form-input",value:d.direccion,onChange:j,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"telefono",children:"TelÃ©fono:"}),e.jsx("input",{type:"tel",id:"telefono",name:"telefono",className:"form-input",value:d.telefono,onChange:j,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",className:"form-input",value:d.email,onChange:j,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"contraseÃ±a",children:"ContraseÃ±a:"}),e.jsx("input",{type:"password",id:"contraseÃ±a",name:"contraseÃ±a",className:"form-input",value:d.contraseÃ±a,onChange:j,required:!0})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Actualizar"})]})]})},rs=()=>{const[s,r]=o.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"GestiÃ³n de Administradores"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>r("crear"),children:"Crear Administrador"}),e.jsx("button",{className:"admin-button button-actualizar",onClick:()=>r("actualizar"),children:"Actualizar Administrador"})]}),e.jsxs("div",{className:"admin-module-container",children:[s==="crear"&&e.jsx(ss,{}),s==="actualizar"&&e.jsx(as,{})]})]})},ts=()=>{const[s,r]=o.useState({nombre:"",descripcion:""}),h=c=>{const{name:i,value:d}=c.target;r({...s,[i]:d})},u=async c=>{c.preventDefault();try{const i=await fetch("https://backend-mywf.onrender.com/api/etiqueta/crear",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)});if(!i.ok)throw new Error("Error al crear la etiqueta");const d=await i.json();alert("âœ… Etiqueta creada exitosamente"),console.log("Etiqueta creada:",d),r({nombre:"",descripcion:""})}catch(i){console.error("Error al crear la etiqueta:",i),alert("âŒ Hubo un problema al crear la etiqueta")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{className:"title-crear-etiquetas",children:"Crear Etiqueta"}),e.jsxs("form",{onSubmit:u,className:"form-content",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre:"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",className:"form-input",value:s.nombre,onChange:h,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"descripcion",children:"DescripciÃ³n:"}),e.jsx("textarea",{id:"descripcion",name:"descripcion",className:"form-input",value:s.descripcion,onChange:h,required:!0})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Crear"})]})]})},ns=()=>{const[s,r]=o.useState([]),[h,u]=o.useState([]),[c,i]=o.useState(""),[d,f]=o.useState(!1),[n,a]=o.useState({nombre:"",descripcion:""}),[t,l]=o.useState("");o.useEffect(()=>{(async()=>{try{const g=await(await fetch("https://backend-mywf.onrender.com/api/etiqueta/listar",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();r(g),u(g)}catch(p){console.error("Error al cargar etiquetas:",p),alert("Error al cargar etiquetas")}})()},[]),o.useEffect(()=>{if(t.trim()==="")u(s);else{const y=s.filter(p=>p.nombre.toLowerCase().includes(t.toLowerCase()));u(y)}},[t,s]);const j=y=>{const p=s.find(g=>g.id===y);p&&(i(y),a({nombre:p.nombre,descripcion:p.descripcion}),f(!0))},q=y=>{const{name:p,value:g}=y.target;a({...n,[p]:g})},C=async y=>{y.preventDefault();try{if(!(await fetch(`https://backend-mywf.onrender.com/api/etiqueta/actualizar/${c}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(n)})).ok)throw new Error;alert("âœ… Etiqueta actualizada"),r(s.map(g=>g.id===c?{...g,...n}:g)),u(h.map(g=>g.id===c?{...g,...n}:g)),f(!1),i("")}catch{alert("âŒ Error al actualizar etiqueta")}},b=async y=>{if(confirm("Â¿Eliminar esta etiqueta?"))try{if(!(await fetch(`https://backend-mywf.onrender.com/api/etiqueta/eliminar/${y}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error;const g=s.filter(x=>x.id!==y);r(g),u(g)}catch{alert("âŒ Error al eliminar")}};return e.jsxs("div",{className:"form-container",children:[e.jsx("h2",{children:"Actualizar Etiquetas"}),d?e.jsxs("form",{onSubmit:C,className:"form-content",children:[e.jsx("input",{type:"text",name:"nombre",value:n.nombre,onChange:q,className:"form-input",required:!0}),e.jsx("textarea",{name:"descripcion",value:n.descripcion,onChange:q,className:"form-input",required:!0}),e.jsx("button",{type:"submit",className:"form-button",children:"Guardar Cambios"}),e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>{f(!1),i("")},children:"Cancelar"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-content",children:[e.jsx("label",{children:"Buscar por Nombre:"}),e.jsx("input",{type:"text",className:"form-input",value:t,onChange:y=>l(y.target.value),placeholder:"Ingrese un nombre"})]}),e.jsx("ul",{className:"etiquetas-list",children:h.map(y=>e.jsxs("li",{children:[e.jsx("strong",{children:"Nombre:"})," ",y.nombre," ",e.jsx("br",{}),e.jsx("strong",{children:"DescripciÃ³n:"})," ",y.descripcion,e.jsx("br",{}),e.jsx("button",{onClick:()=>j(y.id),className:"edit-button3",children:"Editar"}),e.jsx("button",{onClick:()=>b(y.id),className:"delete-button3",children:"Eliminar"}),e.jsx("hr",{})]},y.id))})]})]})},os=()=>{const[s,r]=o.useState(null);return e.jsxs("div",{className:"admin-container",children:[e.jsx("h1",{className:"admin-title",children:"GestiÃ³n de Etiquetas"}),e.jsxs("div",{className:"admin-buttons-container",children:[e.jsx("button",{className:"admin-button button-crear",onClick:()=>r("crear"),children:"Crear Etiqueta"}),e.jsx("button",{className:"admin-button button-editar",onClick:()=>r("editar"),children:"Actualizar Etiqueta"})]}),e.jsxs("div",{className:"admin-module-container",style:{marginTop:"20px"},children:[s==="crear"&&e.jsx(ts,{}),s==="editar"&&e.jsx(ns,{})]})]})},K=()=>{const[s,r]=o.useState(!1),[h,u]=o.useState("");return o.useEffect(()=>{const c=localStorage.getItem("token"),i=localStorage.getItem("tipoUsuario");r(!!c),u(i)},[]),s?e.jsx(me,{to:"/"}):e.jsx("main",{className:"flex justify-center content-center w-full h-screen",children:e.jsx(le,{})})},J=({children:s,allowedRoles:r})=>{const h=localStorage.getItem("token"),u=localStorage.getItem("tipoUsuario");return!h||r&&!r.includes(u)?e.jsx(me,{to:"/"}):s};function is(){return e.jsx(Ue,{children:e.jsx(ze,{children:e.jsx(Ie,{children:e.jsx(qe,{children:e.jsx("div",{className:"app-container",children:e.jsx("div",{className:"main-content",children:e.jsxs(Ae,{children:[e.jsxs(P,{path:"/",element:e.jsx(Pe,{}),children:[e.jsx(P,{index:!0,element:e.jsx(Re,{})}),e.jsx(P,{path:"productos/:id",element:e.jsx(Te,{})}),e.jsx(P,{path:"searches",element:e.jsx(Ze,{})})," ",e.jsx(P,{path:"perfil",element:e.jsx(J,{allowedRoles:["admin","usuario","moderador"],children:e.jsx(Ge,{})})}),e.jsx(P,{path:"eventos",element:e.jsx(J,{allowedRoles:["admin","moderador"],children:e.jsx(Ye,{})})}),e.jsx(P,{path:"disfraces",element:e.jsx(J,{allowedRoles:["admin","moderador"],children:e.jsx(es,{})})}),e.jsx(P,{path:"etiquetas",element:e.jsx(J,{allowedRoles:["admin","moderador"],children:e.jsx(os,{})})}),e.jsx(P,{path:"administradores",element:e.jsx(J,{allowedRoles:["admin"],children:e.jsx(rs,{})})})]}),e.jsx(P,{path:"/login",element:e.jsx(K,{}),children:e.jsx(P,{index:!0,element:e.jsx(Be,{})})}),e.jsx(P,{path:"/register",element:e.jsx(K,{}),children:e.jsx(P,{index:!0,element:e.jsx(Oe,{})})}),e.jsx(P,{path:"/confirm/:token",element:e.jsx(Je,{})}),e.jsx(P,{path:"/forgot/id",element:e.jsx(_e,{})}),e.jsx(P,{path:"/recuperar-password/:token",element:e.jsx(He,{})}),e.jsx(P,{path:"*",element:e.jsx(Xe,{})})]})})})})})})})}De.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(is,{})}));
